{{ $url := .Destination -}}

{{/* Until Hugo supports hook params (https://github.com/gohugoio/hugo/issues/6670), we'll inspect .Text. */ -}}

{{ $isExternal := hasPrefix $url "http" -}}
<a href="{{ $url | safeURL }}"
  {{- with .Title}} title="{{ . }}"{{ end -}}
  {{- if $isExternal }} target="_blank" rel="noopener"
    {{- $noExternalIcon := in .Text "hk-no-external-icon" -}}
    {{ if not $noExternalIcon }} class="external-link"{{ end -}}
  {{ end -}}
>
  {{- .Text | safeHTML -}}
</a>

{{- /* This comment ensures that all trailing whitespace is trimmed. */ -}}
